FORMS 



# HTML Templates
BASE_TEMPLATE = '''
<!DOCTYPE html>
<html>
<head>
    <title>Bug Tracker - {{ title }}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        nav { background: #2c3e50; color: white; padding: 15px 0; margin-bottom: 20px; }
        nav .container { display: flex; justify-content: space-between; align-items: center; }
        nav h1 { font-size: 24px; }
        nav a { color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 4px; }
        nav a:hover { background: #34495e; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        input[type="text"], input[type="file"], select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        textarea { resize: vertical; min-height: 100px; }
        button { background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button:hover { background: #2980b9; }
        .btn-secondary { background: #95a5a6; }
        .btn-secondary:hover { background: #7f8c8d; }
        .btn-danger { background: #e74c3c; }
        .btn-danger:hover { background: #c0392b; }
        .btn-success { background: #27ae60; }
        .btn-success:hover { background: #229954; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; }
        .stat-number { font-size: 36px; font-weight: bold; color: #3498db; }
        .stat-label { color: #7f8c8d; margin-top: 5px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f8f9fa; font-weight: bold; }
        tr:hover { background: #f8f9fa; }
        .badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .badge-critical { background: #e74c3c; color: white; }
        .badge-high { background: #e67e22; color: white; }
        .badge-medium { background: #f39c12; color: white; }
        .badge-low { background: #95a5a6; color: white; }
        .badge-open { background: #3498db; color: white; }
        .badge-progress { background: #f39c12; color: white; }
        .badge-closed { background: #27ae60; color: white; }
        .filter-section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        .chart-container { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .pie-chart { display: flex; justify-content: center; align-items: center; margin: 20px 0; }
        .pie-slice { margin: 0 10px; text-align: center; }
        .pie-box { width: 60px; height: 60px; display: inline-block; border-radius: 8px; margin-bottom: 8px; }
        .legend { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px; }
        .legend-item { display: flex; align-items: center; }
        .legend-color { width: 20px; height: 20px; border-radius: 4px; margin-right: 8px; }
        .bug-detail { line-height: 1.8; }
        .bug-detail strong { color: #2c3e50; }
        .alert { padding: 15px; border-radius: 4px; margin-bottom: 20px; }
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <h1>üêõ Bug Tracker</h1>
            <div>
                <a href="/">Dashboard</a>
                <a href="/report">Report Bug</a>
                <a href="/bugs">All Bugs</a>
            </div>
        </div>
    </nav>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
</body>
</html>
'''

DASHBOARD_TEMPLATE = '''
<h2 style="margin-bottom: 20px;">Bug Dashboard</h2>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-number">{{ total_bugs }}</div>
            <div class="stat-label">Total Bugs</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ open_bugs }}</div>
            <div class="stat-label">Open Bugs</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ in_progress_bugs }}</div>
            <div class="stat-label">In Progress</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ closed_bugs }}</div>
            <div class="stat-label">Closed</div>
        </div>
    </div>

    <div class="chart-container">
        <h3>Category Distribution</h3>
        <div class="pie-chart">
            {% for category, count in category_dist.items() %}
            <div class="pie-slice">
                <div class="pie-box" style="background: {{ colors[category] }};"></div>
                <div><strong>{{ count }}</strong></div>
                <div style="font-size: 12px; color: #7f8c8d;">{{ category }}</div>
            </div>
            {% endfor %}
        </div>
        <div class="legend">
            {% for category, color in colors.items() %}
            <div class="legend-item">
                <div class="legend-color" style="background: {{ color }};"></div>
                <span>{{ category }}: {{ category_dist.get(category, 0) }} bugs</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 15px;">Recent Bugs</h3>
        {% if recent_bugs %}
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Severity</th>
                    <th>Status</th>
                    <th>Assigned To</th>
                </tr>
            </thead>
            <tbody>
                {% for bug in recent_bugs %}
                <tr onclick="window.location.href='/bug/{{ bug.id }}'" style="cursor: pointer;">
                    <td>#{{ bug.id }}</td>
                    <td>{{ bug.title }}</td>
                    <td>{{ bug.category }}</td>
                    <td><span class="badge badge-{{ bug.severity }}">{{ bug.severity }}</span></td>
                    <td><span class="badge badge-{{ bug.status }}">{{ bug.status }}</span></td>
                    <td>{{ bug.assigned_to or 'Unassigned' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p style="color: #7f8c8d; text-align: center; padding: 20px;">No bugs reported yet.</p>
        {% endif %}
    </div>
'''

REPORT_BUG_TEMPLATE = '''
<div class="card">
        <h2 style="margin-bottom: 20px;">Report a Bug</h2>
        <form method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="title">Bug Title *</label>
                <input type="text" id="title" name="title" required placeholder="Brief description of the bug">
            </div>
            
            <div class="form-group">
                <label for="description">Description *</label>
                <textarea id="description" name="description" required placeholder="Detailed description of the bug, steps to reproduce, expected vs actual behavior"></textarea>
            </div>
            
            <div class="form-group">
                <label for="category">Category *</label>
                <select id="category" name="category" required>
                    <option value="">Select category...</option>
                    <option value="UI">UI (User Interface)</option>
                    <option value="Backend">Backend</option>
                    <option value="Performance">Performance</option>
                    <option value="Security">Security</option>
                    <option value="Database">Database</option>
                    <option value="API">API</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="severity">Severity Level *</label>
                <select id="severity" name="severity" required>
                    <option value="">Select severity...</option>
                    <option value="critical">Critical - System is unusable</option>
                    <option value="high">High - Major functionality broken</option>
                    <option value="medium">Medium - Feature partially working</option>
                    <option value="low">Low - Minor issue</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="attachment">Attachment (Optional)</label>
                <input type="file" id="attachment" name="attachment" accept="image/*,.log,.txt">
                <small style="color: #7f8c8d; display: block; margin-top: 5px;">Upload screenshots or log files to help explain the issue</small>
            </div>
            
            <button type="submit">Submit Bug Report</button>
            <a href="/" style="margin-left: 10px;"><button type="button" class="btn-secondary">Cancel</button></a>
        </form>
    </div>
'''

ALL_BUGS_TEMPLATE = '''
<h2 style="margin-bottom: 20px;">All Bugs</h2>
    
    <div class="filter-section">
        <h3 style="margin-bottom: 15px;">Search & Filter</h3>
        <form method="GET">
            <div class="filter-row">
                <div class="form-group">
                    <label for="search">Search</label>
                    <input type="text" id="search" name="search" value="{{ search }}" placeholder="Search by title or description">
                </div>
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category">
                        <option value="">All Categories</option>
                        <option value="UI" {% if category == 'UI' %}selected{% endif %}>UI</option>
                        <option value="Backend" {% if category == 'Backend' %}selected{% endif %}>Backend</option>
                        <option value="Performance" {% if category == 'Performance' %}selected{% endif %}>Performance</option>
                        <option value="Security" {% if category == 'Security' %}selected{% endif %}>Security</option>
                        <option value="Database" {% if category == 'Database' %}selected{% endif %}>Database</option>
                        <option value="API" {% if category == 'API' %}selected{% endif %}>API</option>
                        <option value="Other" {% if category == 'Other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="severity">Severity</label>
                    <select id="severity" name="severity">
                        <option value="">All Severities</option>
                        <option value="critical" {% if severity == 'critical' %}selected{% endif %}>Critical</option>
                        <option value="high" {% if severity == 'high' %}selected{% endif %}>High</option>
                        <option value="medium" {% if severity == 'medium' %}selected{% endif %}>Medium</option>
                        <option value="low" {% if severity == 'low' %}selected{% endif %}>Low</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="status">Status</label>
                    <select id="status" name="status">
                        <option value="">All Statuses</option>
                        <option value="open" {% if status == 'open' %}selected{% endif %}>Open</option>
                        <option value="progress" {% if status == 'progress' %}selected{% endif %}>In Progress</option>
                        <option value="closed" {% if status == 'closed' %}selected{% endif %}>Closed</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="assigned">Assigned To</label>
                    <select id="assigned" name="assigned">
                        <option value="">All Assignees</option>
                        <option value="Unassigned" {% if assigned == 'Unassigned' %}selected{% endif %}>Unassigned</option>
                        {% for user in users %}
                        <option value="{{ user }}" {% if assigned == user %}selected{% endif %}>{{ user }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <button type="submit">Apply Filters</button>
            <a href="/bugs"><button type="button" class="btn-secondary">Clear Filters</button></a>
        </form>
    </div>

    <div class="card">
        {% if filtered_bugs %}
        <p style="color: #7f8c8d; margin-bottom: 15px;">Showing {{ filtered_bugs|length }} of {{ total_bugs }} bugs</p>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Severity</th>
                    <th>Status</th>
                    <th>Assigned To</th>
                    <th>Date Reported</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for bug in filtered_bugs %}
                <tr>
                    <td>#{{ bug.id }}</td>
                    <td>{{ bug.title }}</td>
                    <td>{{ bug.category }}</td>
                    <td><span class="badge badge-{{ bug.severity }}">{{ bug.severity }}</span></td>
                    <td><span class="badge badge-{{ bug.status }}">{{ bug.status }}</span></td>
                    <td>{{ bug.assigned_to or 'Unassigned' }}</td>
                    <td>{{ bug.date }}</td>
                    <td>
                        <a href="/bug/{{ bug.id }}"><button type="button" style="padding: 6px 12px; font-size: 12px;">View</button></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p style="color: #7f8c8d; text-align: center; padding: 20px;">No bugs found matching your criteria.</p>
        {% endif %}
    </div>
'''

BUG_DETAIL_TEMPLATE = '''
{% if message %}
    <div class="alert alert-success">{{ message }}</div>
    {% endif %}
    
    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2>Bug #{{ bug.id }}: {{ bug.title }}</h2>
            <a href="/bugs"><button type="button" class="btn-secondary">Back to List</button></a>
        </div>
        
        <div class="bug-detail">
            <p><strong>Status:</strong> <span class="badge badge-{{ bug.status }}">{{ bug.status }}</span></p>
            <p><strong>Category:</strong> {{ bug.category }}</p>
            <p><strong>Severity:</strong> <span class="badge badge-{{ bug.severity }}">{{ bug.severity }}</span></p>
            <p><strong>Assigned To:</strong> {{ bug.assigned_to or 'Unassigned' }}</p>
            <p><strong>Date Reported:</strong> {{ bug.date }}</p>
            {% if bug.attachment %}
            <p><strong>Attachment:</strong> {{ bug.attachment }}</p>
            {% endif %}
            
            <h3 style="margin-top: 25px; margin-bottom: 10px;">Description</h3>
            <p style="background: #f8f9fa; padding: 15px; border-radius: 4px; line-height: 1.6;">{{ bug.description }}</p>
        </div>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 15px;">Bug Assignment</h3>
        <form method="POST" action="/bug/{{ bug.id }}/assign">
            <div class="form-group">
                <label for="assigned_to">Assign To</label>
                <select id="assigned_to" name="assigned_to" required>
                    <option value="">Select team member...</option>
                    {% for user in users %}
                    <option value="{{ user }}" {% if bug.assigned_to == user %}selected{% endif %}>{{ user }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit">Update Assignment</button>
        </form>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 15px;">Update Status</h3>
        <form method="POST" action="/bug/{{ bug.id }}/status">
            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" name="status" required>
                    <option value="open" {% if bug.status == 'open' %}selected{% endif %}>Open</option>
                    <option value="progress" {% if bug.status == 'progress' %}selected{% endif %}>In Progress</option>
                    <option value="closed" {% if bug.status == 'closed' %}selected{% endif %}>Closed</option>
                </select>
            </div>
            <button type="submit" class="btn-success">Update Status</button>
        </form>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 15px;">Delete Bug</h3>
        <p style="color: #7f8c8d; margin-bottom: 15px;">This action cannot be undone.</p>
        <form method="POST" action="/bug/{{ bug.id }}/delete" onsubmit="return confirm('Are you sure you want to delete this bug?');">
            <button type="submit" class="btn-danger">Delete Bug</button>
        </form>
    </div>
'''